extends layout

block content
  h1= title
  h2= subtitle

  form.converter-form(action="/convert" method="POST")
    .form-row
      .form-group
        label(for="amount") Cantidad
        input#amount(type="text" name="amount" placeholder="Ingresa la cantidad" required)
    .form-row
      .form-group
        label Desde la Divisa
        select(name="fromCurrency")
          option(value="USD" selected) USD
          option(value="EUR") EUR
          option(value="JPY") JPY
          option(value="BTC") BTC
          option(value="ETH") ETH
      .form-group
        label A la Divisa
        select(name="toCurrency")
          option(value="USD") USD
          option(value="EUR" selected) EUR
          option(value="JPY") JPY
          option(value="BTC") BTC
          option(value="ETH") ETH
    .form-row
      button.convert-button(type="submit") Convertir

  if result
    .result
      h3 Resultado
      p= result

  if fromDetails
    h3 Informaci贸n de la moneda de origen (#{fromDetails.name || fromDetails.symbol || 'No disponible'})
    ul
      if fromDetails.current_price
        li Precio actual: $#{fromDetails.current_price.toLocaleString()}
        li Capitalizaci贸n de mercado: $#{fromDetails.market_cap.toLocaleString()}
        li Volumen de trading (24h): $#{fromDetails.total_volume.toLocaleString()}
        li Cambio en 24h: #{fromDetails.price_change_percentage_24h.toFixed(2)}%
      else if fromDetails.rate
        li Tasa de cambio: $#{fromDetails.rate.toLocaleString()}

  if toDetails
    h3 Informaci贸n de la moneda de destino (#{toDetails.name || toDetails.symbol || 'No disponible'})
    ul
      if toDetails.current_price
        li Precio actual: $#{toDetails.current_price.toLocaleString()}
        li Capitalizaci贸n de mercado: $#{toDetails.market_cap.toLocaleString()}
        li Volumen de trading (24h): $#{toDetails.total_volume.toLocaleString()}
        li Cambio en 24h: #{toDetails.price_change_percentage_24h.toFixed(2)}%
      else if toDetails.rate
        li Tasa de cambio: $#{toDetails.rate.toLocaleString()}

  if error
    .error
      p= error
